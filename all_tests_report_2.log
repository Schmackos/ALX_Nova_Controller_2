Collected 11 tests (test_api, test_auth, test_button, test_mocks, test_mqtt, test_ota, test_settings, test_smart_sensing, test_utils, test_websocket, test_wifi)

Processing test_api in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_api\test_smart_sensing_api.cpp:378:test_get_smartsensing_returns_state:PASS
test\test_api\test_smart_sensing_api.cpp:379:test_post_smartsensing_updates_mode:PASS
test\test_api\test_smart_sensing_api.cpp:380:test_post_smartsensing_updates_timer_duration:PASS
test\test_api\test_smart_sensing_api.cpp:381:test_post_smartsensing_rejects_invalid_timer_low:PASS
test\test_api\test_smart_sensing_api.cpp:382:test_post_smartsensing_rejects_invalid_timer_high:PASS
test\test_api\test_smart_sensing_api.cpp:383:test_post_smartsensing_updates_voltage_threshold:PASS
test\test_api\test_smart_sensing_api.cpp:384:test_post_smartsensing_rejects_invalid_voltage_low:PASS
test\test_api\test_smart_sensing_api.cpp:385:test_post_smartsensing_rejects_invalid_voltage_high:PASS
test\test_api\test_smart_sensing_api.cpp:386:test_post_smartsensing_rejects_invalid_json:PASS
test\test_api\test_smart_sensing_api.cpp:387:test_post_smartsensing_rejects_missing_body:PASS
test\test_api\test_smart_sensing_api.cpp:388:test_post_smartsensing_manual_override:PASS
test\test_api\test_smart_sensing_api.cpp:389:test_post_smartsensing_rejects_invalid_mode:PASS
test\test_api\test_smart_sensing_api.cpp:390:test_post_smartsensing_multiple_parameters:PASS

-----------------------
13 Tests 0 Failures 0 Ignored 
OK

------------------ native:test_api [PASSED] Took 1.26 seconds ------------------

Processing test_auth in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_auth\test_auth_handler.cpp:375:test_session_creation_empty_slot:PASS
test\test_auth\test_auth_handler.cpp:376:test_session_creation_fills_slots:PASS
test\test_auth\test_auth_handler.cpp:220:test_session_creation_full_eviction:FAIL: Expected 0 Was 36
test\test_auth\test_auth_handler.cpp:378:test_session_validation_valid:PASS
test\test_auth\test_auth_handler.cpp:379:test_session_validation_expired:PASS
test\test_auth\test_auth_handler.cpp:380:test_session_validation_nonexistent:PASS
test\test_auth\test_auth_handler.cpp:381:test_session_removal:PASS
test\test_auth\test_auth_handler.cpp:382:test_session_lastSeen_updates:PASS
test\test_auth\test_auth_handler.cpp:385:test_password_default_from_ap:PASS
test\test_auth\test_auth_handler.cpp:386:test_password_load_from_nvs:PASS
test\test_auth\test_auth_handler.cpp:387:test_password_change_saved:PASS
test\test_auth\test_auth_handler.cpp:390:test_login_success:PASS
test\test_auth\test_auth_handler.cpp:339:test_login_failure:FAIL: Expected FALSE Was TRUE
test\test_auth\test_auth_handler.cpp:392:test_session_empty_validation:PASS
test\test_auth\test_auth_handler.cpp:366:test_multiple_sessions_independent_validation:FAIL: Expected TRUE Was FALSE

-----------------------
15 Tests 3 Failures 0 Ignored 
FAIL
Program errored with 3 code
----------------- native:test_auth [ERRORED] Took 0.92 seconds -----------------

Processing test_button in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_button\test_button_handler.cpp:319:test_button_press_detected:PASS
test\test_button\test_button_handler.cpp:320:test_button_debouncing:PASS
test\test_button\test_button_handler.cpp:321:test_button_long_press:PASS
test\test_button\test_button_handler.cpp:322:test_button_very_long_press:PASS
test\test_button\test_button_handler.cpp:323:test_button_release_timing:PASS
test\test_button\test_button_handler.cpp:324:test_button_single_click:PASS
test\test_button\test_button_handler.cpp:325:test_button_double_click:PASS
test\test_button\test_button_handler.cpp:326:test_button_state_transitions:PASS
test\test_button\test_button_handler.cpp:327:test_button_active_low_logic:PASS
test\test_button\test_button_handler.cpp:328:test_button_held_release:PASS

-----------------------
10 Tests 0 Failures 0 Ignored 
OK

---------------- native:test_button [PASSED] Took 0.72 seconds ----------------

Processing test_mqtt in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_mqtt\test_mqtt_handler.cpp:387:test_load_mqtt_settings_from_nvs:PASS
test\test_mqtt\test_mqtt_handler.cpp:388:test_save_mqtt_settings_to_nvs:PASS
test\test_mqtt\test_mqtt_handler.cpp:389:test_mqtt_disabled_when_no_broker:PASS
test\test_mqtt\test_mqtt_handler.cpp:392:test_mqtt_connect_success:PASS
test\test_mqtt\test_mqtt_handler.cpp:393:test_mqtt_reconnect_on_disconnect:PASS
test\test_mqtt\test_mqtt_handler.cpp:394:test_mqtt_connect_with_auth:PASS
test\test_mqtt\test_mqtt_handler.cpp:397:test_publish_led_state:PASS
test\test_mqtt\test_mqtt_handler.cpp:398:test_publish_blinking_state:PASS
test\test_mqtt\test_mqtt_handler.cpp:399:test_publish_smart_sensing_state:PASS
test\test_mqtt\test_mqtt_handler.cpp:402:test_ha_discovery_generation:PASS
test\test_mqtt\test_mqtt_handler.cpp:403:test_ha_discovery_removal:PASS
test\test_mqtt\test_mqtt_handler.cpp:406:test_mqtt_update_validates_broker:PASS
test\test_mqtt\test_mqtt_handler.cpp:407:test_mqtt_custom_base_topic:PASS
test\test_mqtt\test_mqtt_handler.cpp:408:test_mqtt_default_port:PASS

-----------------------
14 Tests 0 Failures 0 Ignored 
OK

----------------- native:test_mqtt [PASSED] Took 0.96 seconds -----------------

Processing test_ota in native environment
--------------------------------------------------------------------------------
Building...
test\test_ota\test_ota_updater.cpp: In function 'String calculateSHA256(const uint8_t*, size_t)':
test\test_ota\test_ota_updater.cpp:108:10: error: ambiguous overload for 'operator+=' (operand types are 'String' and 'size_t' {aka 'long long unsigned int'})
  108 |     hash += len;
      |     ~~~~~^~~~~~
test\test_ota\test_ota_updater.cpp:108:10: note: there are 9 candidates
In file included from test\test_ota\test_ota_updater.cpp:6:
test\test_ota\../test_mocks/Arduino.h:22:11: note: candidate 1: 'String& String::operator+=(const String&)'
   22 |   String &operator+=(const String &other) {
      |           ^~~~~~~~
test\test_ota\../test_mocks/Arduino.h:32:11: note: candidate 2: 'String& String::operator+=(char)'
   32 |   String &operator+=(char c) {
      |           ^~~~~~~~
test\test_ota\../test_mocks/Arduino.h:37:11: note: candidate 3: 'String& String::operator+=(int)'
   37 |   String &operator+=(int v) {
      |           ^~~~~~~~
test\test_ota\../test_mocks/Arduino.h:42:11: note: candidate 4: 'String& String::operator+=(unsigned int)'
   42 |   String &operator+=(unsigned int v) {
      |           ^~~~~~~~
test\test_ota\../test_mocks/Arduino.h:47:11: note: candidate 5: 'String& String::operator+=(long int)'
   47 |   String &operator+=(long v) {
      |           ^~~~~~~~
test\test_ota\../test_mocks/Arduino.h:52:11: note: candidate 6: 'String& String::operator+=(long unsigned int)'
   52 |   String &operator+=(unsigned long v) {
      |           ^~~~~~~~
test\test_ota\../test_mocks/Arduino.h:57:11: note: candidate 7: 'String& String::operator+=(float)'
   57 |   String &operator+=(float v) {
      |           ^~~~~~~~
test\test_ota\../test_mocks/Arduino.h:62:11: note: candidate 8: 'String& String::operator+=(double)'
   62 |   String &operator+=(double v) {
      |           ^~~~~~~~
*** [.pio\build\native\test\test_ota\test_ota_updater.o] Error 1
Building stage has failed, see errors above. Use `pio test -vvv` option to enable verbose output.
----------------- native:test_ota [ERRORED] Took 0.66 seconds -----------------

Processing test_settings in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_settings\test_settings_manager.cpp:285:test_load_settings_defaults:PASS
test\test_settings\test_settings_manager.cpp:286:test_save_settings_to_nvs:PASS
test\test_settings\test_settings_manager.cpp:287:test_load_settings_from_nvs:PASS
test\test_settings\test_settings_manager.cpp:288:test_factory_reset_clears_all:PASS
test\test_settings\test_settings_manager.cpp:290:test_settings_api_get:PASS
test\test_settings\test_settings_manager.cpp:291:test_settings_api_update:PASS
test\test_settings\test_settings_manager.cpp:292:test_settings_update_partial:PASS
test\test_settings\test_settings_manager.cpp:293:test_settings_validation:PASS

-----------------------
8 Tests 0 Failures 0 Ignored 
OK

--------------- native:test_settings [PASSED] Took 0.92 seconds ---------------

Processing test_smart_sensing in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_smart_sensing\test_smart_sensing_logic.cpp:312:test_timer_stays_full_when_voltage_detected:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:313:test_timer_counts_down_without_voltage:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:314:test_timer_resets_when_voltage_reappears:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:315:test_amplifier_turns_off_at_zero:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:316:test_always_on_mode:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:317:test_always_off_mode:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:318:test_voltage_threshold_detection:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:319:test_mode_transitions:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:320:test_rapid_voltage_fluctuations:PASS
test\test_smart_sensing\test_smart_sensing_logic.cpp:321:test_timer_at_zero_with_voltage:PASS

-----------------------
10 Tests 0 Failures 0 Ignored 
OK

------------- native:test_smart_sensing [PASSED] Took 0.73 seconds -------------

Processing test_utils in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_utils\test_utils.cpp:232:test_version_comparison_equal:PASS
test\test_utils\test_utils.cpp:233:test_version_comparison_less:PASS
test\test_utils\test_utils.cpp:234:test_version_comparison_greater:PASS
test\test_utils\test_utils.cpp:235:test_version_comparison_major_minor_patch:PASS
test\test_utils\test_utils.cpp:238:test_rssi_to_quality_boundaries:PASS
test\test_utils\test_utils.cpp:175:test_rssi_to_quality_linear_scale:FAIL: Expected 75 Was 76
test\test_utils\test_utils.cpp:242:test_reset_reason_poweron:PASS
test\test_utils\test_utils.cpp:243:test_reset_reason_external:PASS
test\test_utils\test_utils.cpp:244:test_reset_reason_software:PASS
test\test_utils\test_utils.cpp:245:test_reset_reason_panic:PASS
test\test_utils\test_utils.cpp:246:test_reset_reason_int_watchdog:PASS
test\test_utils\test_utils.cpp:247:test_reset_reason_task_watchdog:PASS
test\test_utils\test_utils.cpp:248:test_reset_reason_deepsleep:PASS
test\test_utils\test_utils.cpp:249:test_reset_reason_brownout:PASS
test\test_utils\test_utils.cpp:250:test_reset_reason_unknown:PASS

-----------------------
15 Tests 1 Failures 0 Ignored 
FAIL
Program received signal CTRL_BREAK_EVENT (None)
---------------- native:test_utils [ERRORED] Took 0.78 seconds ----------------

Processing test_websocket in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_websocket\test_websocket_handler.cpp:313:test_broadcast_led_state_on:PASS
test\test_websocket\test_websocket_handler.cpp:314:test_broadcast_led_state_off:PASS
test\test_websocket\test_websocket_handler.cpp:315:test_broadcast_blinking_state_on:PASS
test\test_websocket\test_websocket_handler.cpp:316:test_broadcast_blinking_state_off:PASS
test\test_websocket\test_websocket_handler.cpp:317:test_broadcast_json_format:PASS
test\test_websocket\test_websocket_handler.cpp:320:test_broadcast_hardware_stats:PASS
test\test_websocket\test_websocket_handler.cpp:321:test_broadcast_zero_stats:PASS
test\test_websocket\test_websocket_handler.cpp:324:test_websocket_client_cleanup:PASS
test\test_websocket\test_websocket_handler.cpp:325:test_websocket_add_client:PASS
test\test_websocket\test_websocket_handler.cpp:326:test_websocket_remove_client:PASS
test\test_websocket\test_websocket_handler.cpp:327:test_websocket_broadcast_to_all_clients:PASS
test\test_websocket\test_websocket_handler.cpp:328:test_websocket_no_broadcast_when_empty:PASS
test\test_websocket\test_websocket_handler.cpp:331:test_websocket_message_json_valid:PASS
test\test_websocket\test_websocket_handler.cpp:332:test_websocket_message_escaping:PASS
test\test_websocket\test_websocket_handler.cpp:333:test_websocket_message_size:PASS

-----------------------
15 Tests 0 Failures 0 Ignored 
OK

--------------- native:test_websocket [PASSED] Took 0.83 seconds ---------------

Processing test_wifi in native environment
--------------------------------------------------------------------------------
Building...


Testing...
test\test_wifi\test_wifi_manager.cpp:339:test_save_single_network:PASS
test\test_wifi\test_wifi_manager.cpp:340:test_save_multiple_networks:PASS
test\test_wifi\test_wifi_manager.cpp:341:test_update_existing_network:PASS
test\test_wifi\test_wifi_manager.cpp:342:test_remove_network_shifts_down:PASS
test\test_wifi\test_wifi_manager.cpp:343:test_save_rejects_sixth_network:PASS
test\test_wifi\test_wifi_manager.cpp:346:test_save_network_with_static_ip:PASS
test\test_wifi\test_wifi_manager.cpp:347:test_load_network_applies_static_ip:PASS
test\test_wifi\test_wifi_manager.cpp:348:test_network_priority_preserves_static_ip:PASS
test\test_wifi\test_wifi_manager.cpp:349:test_static_ip_validation:PASS
test\test_wifi\test_wifi_manager.cpp:352:test_wifi_scan_returns_json:PASS
test\test_wifi\test_wifi_manager.cpp:353:test_wifi_scan_signal_strength:PASS
test\test_wifi\test_wifi_manager.cpp:356:test_connect_to_stored_networks_order:PASS
test\test_wifi\test_wifi_manager.cpp:357:test_connect_success_moves_to_priority:PASS
test\test_wifi\test_wifi_manager.cpp:360:test_wifi_list_excludes_passwords:PASS
test\test_wifi\test_wifi_manager.cpp:361:test_wifi_save_validates_fields:PASS
test\test_wifi\test_wifi_manager.cpp:362:test_remove_network_invalid_index:PASS
test\test_wifi\test_wifi_manager.cpp:363:test_remove_network_negative_index:PASS

-----------------------
17 Tests 0 Failures 0 Ignored 
OK

----------------- native:test_wifi [PASSED] Took 0.86 seconds -----------------

=================================== SUMMARY ===================================
Environment         Test                Status    Duration
------------------  ------------------  --------  ------------
esp32-s3-devkitm-1  test_api            SKIPPED
esp32-s3-devkitm-1  test_auth           SKIPPED
esp32-s3-devkitm-1  test_button         SKIPPED
esp32-s3-devkitm-1  test_mocks          SKIPPED
esp32-s3-devkitm-1  test_mqtt           SKIPPED
esp32-s3-devkitm-1  test_ota            SKIPPED
esp32-s3-devkitm-1  test_settings       SKIPPED
esp32-s3-devkitm-1  test_smart_sensing  SKIPPED
esp32-s3-devkitm-1  test_utils          SKIPPED
esp32-s3-devkitm-1  test_websocket      SKIPPED
esp32-s3-devkitm-1  test_wifi           SKIPPED
native              test_api            PASSED    00:00:01.259
native              test_auth           ERRORED   00:00:00.915
native              test_button         PASSED    00:00:00.723
native              test_mocks          SKIPPED
native              test_mqtt           PASSED    00:00:00.964

native              test_ota            ERRORED   00:00:00.663
native              test_settings       PASSED    00:00:00.923
native              test_smart_sensing  PASSED    00:00:00.726
native              test_utils          ERRORED   00:00:00.781
native              test_websocket      PASSED    00:00:00.832
native              test_wifi           PASSED    00:00:00.862
=========== 120 test cases: 4 failed, 113 succeeded in 00:00:08.647 ===========
